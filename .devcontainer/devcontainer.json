{
	"name": "kmgm-issuer-dev",
	"image": "mcr.microsoft.com/devcontainers/go",
	"features": {
		"ghcr.io/devcontainers/features/kubectl-helm-minikube:1": {},
		"ghcr.io/rio/features/skaffold:2": {},
		"ghcr.io/devcontainers/features/docker-in-docker:2": {
			"moby": false
		},
	},
	"postCreateCommand": ".devcontainer/postCreate.sh",
	"runArgs": [ "--init", "--cap-add=SYS_PTRACE", "--security-opt", "seccomp=unconfined" ],

	"customizations": {
		"vscode": {
			"settings": {
				"terminal.integrated.defaultProfile.linux": "zsh",
				"terminal.integrated.profiles.linux": {
					"zsh": {
						"path": "/usr/bin/zsh"
					}
				}
			},

			"extensions": [
				"golang.Go"
			]
		}
	},
	"remoteEnv": {
		"PATH": "${containerEnv:PATH}:/opt/protoc/bin"
	},
	"mounts": [
		"source=${env:HOME}${env:USERPROFILE}/.kube,target=/home/vscode/.kube,type=bind",
		"source=${env:HOME}${env:USERPROFILE}/.ssh,target=/home/vscode/.ssh,type=bind,readonly",
		"source=${env:HOME}${env:USERPROFILE}/worksp/kmgm,target=/workspaces/kmgm,type=bind",
	],
	"remoteUser": "vscode"
}
